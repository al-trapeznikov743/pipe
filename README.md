pipe

Идея pipe состоит в том, чтобы сделать мини-экосистему, состоящую из динамически подгружаемых модулей.

Если нужен новый модуль: пишем фронт, микросервис (добавляем в deploy-скрипт), при необходимости подключаем БД.

В остальном это будет тренировочная площадка, на которой я буду создавать и поддерживать различные интересные, а может быть и совсем обычные штуки, тестировать технологии, и так далее и тому подобное.

Первым модулем будет чат, и после его написания и успешного тестирования, проект будет упакован и размещён в облаке (к примеру на amazon aws).

На данный момент проект находится на начальной стадии разработки и продолжает развиваться.

# ===========================================

Требования

Для запуска проекта требуются следующие компоненты:

- minikube - для локальной работы с K8s-кластером;
- kubectl - инструмент для работы с K8s;
- helm - для управления K8s-приложениями;
- контейнерный движок, в нашем случае containerd;

Скрипты

./deploy.sh install - развертывет фронт, бэк, ingress-контроллер;
./deploy.sh start_db - развертывает postgresql.

# ===========================================

Тут ниже мои неряшливые заметки, оставлю пока так

helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
helm repo update

# это выполняется в скриптом deploy.sh (если ingress не установлен в кластер)
helm install ingress-nginx ingress-nginx/ingress-nginx


echo "127.0.0.1 myapp.local" | sudo tee -a /etc/hosts > /dev/null
или
sudo sh -c 'echo "127.0.0.1 myapp.local" >> /etc/hosts'


docker login

# обновление образа локально
docker build -t myusername/myapp:latest . - пересобрать образ (локально);

# обновление образа в docker hub
docker push myusername/myapp:latest - пуш обновленного (или нового) образа;

kubectl exec -it pod_name -- /bin/sh - зайти в консоль пода;

ПРОБЛЕМЫ:

npm cache clean --force - чистка кэша npm;